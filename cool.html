<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LaVita Sales Assistant</title>
    <meta name="description" content="Assistenzsystem f√ºr LaVita Vertriebsmitarbeiter">
    <style>
        :root {
            --lavita-blue: #0d2d57;
            --accent: #00aa99;
            --light-bg: #f9fafa;
            --text-color: #333;
            --border-radius: 6px;
            --box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--light-bg);
            margin: 0;
            padding: 0;
            color: var(--text-color);
            line-height: 1.6;
        }

        header {
            background-color: var(--lavita-blue);
            padding: 1rem;
            display: flex;
            justify-content: center;
        }

        header img {
            height: 80px;
            width: auto;
            max-width: 100%;
        }

        .topbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.5rem 2rem;
            background-color: white;
            border-bottom: 1px solid #ddd;
            gap: 1rem;
        }

        .topbar button {
            background-color: var(--lavita-blue);
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: var(--border-radius);
            cursor: pointer;
            font-size: 0.9rem;
            transition: background-color 0.2s ease;
        }

        .topbar button:hover {
            background-color: #1a3d6b;
        }

        .container {
            max-width: 800px;
            margin: 2rem auto;
            padding: 1rem;
        }

        form {
            display: flex;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        input[type="text"] {
            flex: 1;
            padding: 0.8rem;
            font-size: 1rem;
            border: 1px solid #ccc;
            border-radius: var(--border-radius);
            min-width: 0; /* Fix f√ºr Flexbox overflow */
        }

        button.send {
            background-color: var(--accent);
            color: white;
            border: none;
            padding: 0 1.5rem;
            border-radius: var(--border-radius);
            cursor: pointer;
            transition: background-color 0.2s ease;
        }

        button.send:hover {
            background-color: #008877;
        }

        .output {
            background-color: white;
            border-radius: var(--border-radius);
            padding: 1.5rem;
            box-shadow: var(--box-shadow);
        }

        .output a {
            color: var(--lavita-blue);
            text-decoration: underline;
        }

        .output .address {
            cursor: pointer;
            color: var(--accent);
            text-decoration: underline;
        }

        .database-view-button {
            display: block;
            margin: 1rem auto;
            text-align: center;
            background-color: white;
            border: 2px solid var(--lavita-blue);
            padding: 0.5rem 1rem;
            border-radius: var(--border-radius);
            font-weight: bold;
            color: var(--lavita-blue);
            cursor: pointer;
            transition: all 0.2s ease;
            width: 100%;
            max-width: 200px;
        }

        .database-view-button:hover {
            background-color: var(--lavita-blue);
            color: white;
        }

        /* Accessibility improvements */
        button:focus, input:focus {
            outline: 2px solid var(--accent);
            outline-offset: 2px;
        }

        /* Responsive adjustments */
        @media (max-width: 600px) {
            .topbar {
                flex-direction: column;
                padding: 0.5rem;
            }
            
            form {
                flex-direction: column;
            }
            
            button.send {
                padding: 0.8rem;
            }
        }
    </style>
</head>
<body>
    <header>
        <img src="Banner.png" alt="LaVita Logo" aria-hidden="true">
    </header>

    <div class="topbar">
        <button onclick="startVoiceInput()" aria-label="Spracheingabe starten">
            <span aria-hidden="true">üéô</span> Spracheingabe
        </button>
        <button onclick="uploadDocument()" aria-label="Dokument hochladen">
            <span aria-hidden="true">‚ûï</span> Dokument hochladen
        </button>
    </div>

    <main class="container">
        <button class="database-view-button" onclick="showDatabaseView()" aria-label="Datenbankansicht √∂ffnen">
            <span aria-hidden="true">üîç</span> Datenbankansicht
        </button>

        <form id="queryForm" onsubmit="handleSubmit(event)">
            <label for="message" class="sr-only">Frage eingeben</label>
            <input type="text" id="message" placeholder="Frage eingeben..." required>
            <button type="submit" class="send">Senden</button>
        </form>

        <div class="output" id="responseContainer" aria-live="polite">
            <!-- Beispielantwort -->
            <p>du besuchst heute <a href="/kunden/lisa-koenig">Frau Dr. Lisa K√∂nig</a>, Heilpraktikerin in <span class="address" onclick="showMapOptions('https://maps.google.com/?q=M√ºnchen+Schwabing')">M√ºnchen-Schwabing</span>.</p>

            <p>In einem Umkreis von 5 km arbeiten bereits 3 andere Praxen erfolgreich mit LaVita ‚Äì z.‚ÄØB. <a href="/kunden/naturpraxis-bergmann">Naturpraxis Bergmann</a> mit einem monatlichen Volumen von √ò 30 Flaschen.</p>

            <p><strong>Empfehlung:</strong> Betone im Gespr√§ch den regionalen Bezug und die gute Resonanz aus benachbarten Praxen. Stichworte wie ‚ÄûErn√§hrungsbegleitung" oder ‚ÄûVitalstoffberatung" funktionieren in der Region besonders gut.</p>

            <p><strong>Hinweis:</strong> Frau Dr. K√∂nig bietet laut Website auch Kinderheilkunde an ‚Äì hier lohnt es sich, unser Eltern-Kind-Brosch√ºrenpaket zu erw√§hnen.</p>
        </div>
    </main>

    <script>
        // DOM-Elemente cachen
        const messageInput = document.getElementById('message');
        const responseContainer = document.getElementById('responseContainer');
        const queryForm = document.getElementById('queryForm');

        function handleSubmit(e) {
            e.preventDefault();
            const text = messageInput.value.trim();
            
            if (!text) return;
            
            messageInput.value = "";
            
            // Loading state
            responseContainer.innerHTML = '<p>Suche nach Informationen...</p>';
            
            // Simulierte API-Antwort nach kurzer Verz√∂gerung
            setTimeout(() => {
                responseContainer.innerHTML = `
                    <p>Antwort auf: <strong>${escapeHtml(text)}</strong></p>
                    <p>Hier w√§ren die relevanten Informationen basierend auf Ihrer Anfrage.</p>
                `;
            }, 800);
        }

        function startVoiceInput() {
            alert("Spracherkennung gestartet (Demofunktion)");
            // Hier k√∂nnte die Web Speech API integriert werden
        }

        function uploadDocument() {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = '.pdf,.doc,.docx,.txt';
            input.onchange = e => {
                const file = e.target.files[0];
                if (file) {
                    alert(`Datei "${file.name}" wurde ausgew√§hlt (Demofunktion)`);
                    // Hier k√∂nnte der Upload-Prozess implementiert werden
                }
            };
            input.click();
        }

        function showDatabaseView() {
            alert("Datenbankansicht (Demofunktion)");
        }

        function showMapOptions(link) {
            if (confirm("M√∂chten Sie die Adresse in Google Maps √∂ffnen?")) {
                window.open(link, '_blank', 'noopener,noreferrer');
            }
        }

        // Hilfsfunktion zur Sicherheit
        function escapeHtml(unsafe) {
            return unsafe
                .replace(/&/g, "&amp;")
                .replace(/</g, "&lt;")
                .replace(/>/g, "&gt;")
                .replace(/"/g, "&quot;")
                .replace(/'/g, "&#039;");
        }

        // Accessibility: Tastaturbedienung verbessern
        messageInput.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                messageInput.value = '';
            }
        });
    </script>
</body>
</html>
